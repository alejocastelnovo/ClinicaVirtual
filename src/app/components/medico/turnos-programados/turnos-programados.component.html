<div class="turnos-programados-container">
    <mat-card>
        <mat-card-title>Turnos Programados</mat-card-title>

        <mat-card-content>
            <form [formGroup]="horarios">
                <mat-form-field appearance="fill">
                    <mat-label>Seleccionar fecha</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="fecha"
                        (dateChange)="obtenerAgenda($event.value)">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </form>

            <div *ngIf="loading" class="loading-spinner">
                <mat-spinner diameter="40"></mat-spinner>
            </div>

            <div *ngIf="!loading && (!agenda || agenda.length === 0)" class="no-turnos">
                <p>No hay turnos programados para esta fecha</p>
            </div>

            <table mat-table [dataSource]="agenda" class="mat-elevation-z8" *ngIf="!loading && agenda && agenda.length > 0">
                <!-- Fecha Column -->
                <ng-container matColumnDef="fecha">
                    <th mat-header-cell *matHeaderCellDef> Fecha </th>
                    <td mat-cell *matCellDef="let elemento"> {{elemento.fecha | date:'dd/MM/yyyy'}} </td>
                </ng-container>

                <!-- Hora Entrada Column -->
                <ng-container matColumnDef="hora_entrada">
                    <th mat-header-cell *matHeaderCellDef> Hora Entrada </th>
                    <td mat-cell *matCellDef="let elemento"> {{elemento.hora_entrada}} </td>
                </ng-container>

                <!-- Hora Salida Column -->
                <ng-container matColumnDef="hora_salida">
                    <th mat-header-cell *matHeaderCellDef> Hora Salida </th>
                    <td mat-cell *matCellDef="let elemento"> {{elemento.hora_salida}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </mat-card-content>
    </mat-card>
</div>